<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">
    <body>


        <ui:composition template="./../WEB-INF/html/template.xhtml">
            <ui:define name="content">

                <header id="findBookHeader"> 
                    <h1>Hitta bok</h1>
                    <p>Här kan du söka efter böcker, ljudböcker och filmer.</p>
                </header>
                <section id="findBookSection">
                    <h:form>
                        <p>
                            <h:inputText id="txtSearch" value="#{search.topSearch}" />
                            <h:commandButton id="btnOK" value="Sök" action="#{search.redirectToSelf()}"
                            actionListener="#{search.searchAll()}"/>                       
                        </p>    

                        <br><a id="displayAdvaced" href="javascript:toggle();" style="margin-bottom: 0.5em" >Avancerad sökning</a> </br>
                        <!--Javascript for the advanced searchmenu-->
                        <script language="javascript"> 
                            function toggle() {
                                var settings = document.getElementById("searchForm");
                    
                                if(settings.style.display == "block") {
                                    settings.style.display = "none";
                        
                                }
                                else {
                                    settings.style.display = "block";
                        
                                }
                            } 
                        </script>

                        
                        
                        
                        <div id="searchForm" style="display: none;background-color: lightgoldenrodyellow">
                            <div style="margin-left: 1em">
                                <h:form>
                                    <br>Sök genom att fylla i ett eller flera alternativ. </br>
                                    <br><h:outputLabel for="srcTitle" value="Titel"/></br>
                                    <h:inputText id="srcTitle"  style="margin-bottom: 0.5em" value="#{search.title}" />
                                    <br><h:outputLabel for="srcAuthor" value="Författare"/></br>
                                    <h:inputText id="srcAuthor"  style="margin-bottom: 0.5em" value="#{search.creator}" />
                                    <br><h:outputLabel for="srcPublisher" value="Utgivare"/></br>
                                    <h:inputText id="srcPublisher"  style="margin-bottom: 0.5em" value="#{search.publisher}" />
                                    <br><h:outputLabel for="srcISBN" value="ISBN"/></br>
                                    <h:inputText id="srcISBN"  style="margin-bottom: 0.5em" value="#{search.id}" />

                                    <br><h:outputLabel value="Genre"/></br>                          
                                    <h:selectOneMenu id="genreTable" value="#{search.genre}" style="margin-bottom: 0.5em">
                                        <f:selectItem  itemLabel="Alla" itemValue="" />
                                        <f:selectItem  itemLabel="Antologier" itemValue="Antologier" />
                                        <f:selectItem  itemLabel="Barn" itemValue="Barn" />
                                        <f:selectItem  itemLabel="Deckare &amp; kriminalromaner" itemValue="DeckareKriminal" />
                                        <f:selectItem  itemLabel="Dramatik" itemValue="Dramatik" />
                                        <f:selectItem  itemLabel="Essäer &amp; Reportage" itemValue="EssReportage" />
                                        <f:selectItem  itemLabel="Fantasy" itemValue="Fantasy" />
                                        <f:selectItem  itemLabel="Historiska romaner" itemValue="HistoriskaRomaner" />
                                        <f:selectItem  itemLabel="Klassiker" itemValue="Klassiker" />
                                        <f:selectItem  itemLabel="Modern &amp; samtida skönlitteratur" itemValue="ModernSkönlitteratur" />
                                        <f:selectItem  itemLabel="Poesi" itemValue="Poesi" />
                                        <f:selectItem  itemLabel="Science fiction" itemValue="ScienceFiction" />
                                        <f:selectItem  itemLabel="Serier &amp; Grafiska romaner" itemValue="Serier" />
                                        <f:selectItem  itemLabel="Skräck- &amp; spökhistorier" itemValue="Skräck" />
                                        <f:selectItem  itemLabel="Skönlitteratur" itemValue="Skonlitteratur" />
                                        <f:selectItem  itemLabel="Thrillers" itemValue="Thriller" />
                                        <f:selectItem  itemLabel="Äventyr" itemValue="Äventyr" />
                                    </h:selectOneMenu>
                                    
                                    
                                    <br><h:outputLabel value="Språk"/></br> 
                                    <h:selectOneMenu id="laguageTable" value="#{search.language}" style="margin-bottom: 0.5em">
                                        <f:selectItem itemLabel="Alla" itemValue=""/>
                                        <f:selectItem itemLabel="Svenska" itemValue="swedish"/>
                                        <f:selectItem itemLabel="Engelska" itemValue="english"/>
                                        <f:selectItem itemLabel="Danska" itemValue="danish"/>
                                        <f:selectItem itemLabel="Norska" itemValue="norwegian"/>
                                        <f:selectItem itemLabel="Tyska" itemValue="germany"/>
                                        <f:selectItem itemLabel="Franska" itemValue="french"/>
                                        <f:selectItem itemLabel="Japanska" itemValue="japanese"/>
                                    </h:selectOneMenu>
                                    
                                    <br><h:outputLabel value="Typ"/></br>                          
                                    <h:selectOneMenu id="typeTable" value="#{search.type}" style="margin-bottom: 0.5em">
                                        <f:selectItem itemLabel="Alla" itemValue=""/>
                                        <f:selectItem itemLabel="Bok" itemValue="book"/>
                                        <f:selectItem itemLabel="Cd" itemValue="cd"/>
                                        <f:selectItem itemLabel="Film" itemValue="film"/>
                                    </h:selectOneMenu>

                                    <br><h:outputLabel for="srcFromYear" value="Från år"/><span style="padding-left: 40px"/><h:outputLabel 
                                    for="srcToYear" value="Till år"/></br>
                                    <h:inputText  id="srcFromYear" size="5"/><span style="margin-bottom: 0.5em;padding-left: 30px"/>
                                    <h:inputText  id="srcToYear" size="5"/>
                                    <br><h:outputLabel for="srcDescription" value="Fritext"/></br>
                                    <h:inputTextarea id="srcDescription" style="margin-bottom: 0.5em"/>

                                    <br><h:outputLabel value="Finns inne i lager" /></br>
                                    <input id="srcCheckbox" type="checkbox" name="option1" />

                                    <br><h:commandButton style=" margin-top: 1em" value="Sök" action="#{search.redirectToSelf()}" 
                                        actionListener="#{search.searchAdvanced()}"/></br>
                                </h:form>
                            </div>
                        </div>      
                    </h:form>
                    <h:form>
                        <h:head>
                            <link href="./../resources/css/searchPage.css" rel="stylesheet" type="text/css" />
                        </h:head>
                        <h:dataTable id="resultTable" var="item" value="#{currentSession.searchResult}" rowClasses="even,odd" style="width: 100%">
                            <h:column>
                                <table>
                                    <tr>
                                        <td><h:graphicImage value="#{item.image}" width="60" height="50" /></td>
                                        <td width="500px"><h:commandLink id="listItemTitle" value="#{item.title}" 
                                            style="color: black" action="#{search.redirectToBookPage()}" 
                                            actionListener="#{SingleItem.bookListener(item, &quot;searchPage&quot;)}"/>
                                            <p><h:outputText id="creators" value="#{item.creatorNames}"/></p>
                                            <h:outputText id="genre" value="#{item.genre}"/>    
                                         </td>
                                        <td >
                                            <td><h:commandLink id="resultTableBorrow" action="#{search.redirectToSelf()}" value="Låna" 
                                            actionListener="#{search.borrowOrReserve(item)}" rendered="#{search.linkVisible()}"/></td>
                                            <td><h:commandLink id="resultTableBookmark" action="#{search.redirectToSelf()}" 
                                            actionListener="#{search.bookMark(item)}" rendered="#{search.linkVisible()}">
                                                    <h:graphicImage value="#{search.bookMarkImg(item)}"/>   
                                                </h:commandLink></td>
                                            
                                        </td>
                                    </tr>
                                </table>
                            </h:column>     
                        </h:dataTable>     
                    </h:form>
                </section>
            </ui:define>
        </ui:composition>
    </body>
</html>







